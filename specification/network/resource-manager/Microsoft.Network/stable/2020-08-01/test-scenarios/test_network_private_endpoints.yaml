scope: ResourceGroup
testScenarios:
  - description: test_network_private_endpoints
    steps:
      - step: Create_virtualNetworks_vnet1
        resourceName: virtualNetworks_vnet1
        exampleFile: ../examples/Create_virtualNetworks_vnet1_Generated_899.json
        operationId: VirtualNetworks_CreateOrUpdate
      - step: Subnets_Get_900
        exampleFile: ../examples/Subnets_Get_2_Generated.json
        operationId: Subnets_Get
      - step: Create_subnets_subnet1
        resourceName: subnets_subnet1
        exampleFile: ../examples/Create_subnets_subnet1_Generated.json
        operationId: Subnets_CreateOrUpdate
      - step: VirtualNetworks_Get_902
        exampleFile: ../examples/VirtualNetworks_Get_902_Generated.json
        operationId: VirtualNetworks_Get
      - step: Update_virtualNetworks_vnet1_904
        resourceName: virtualNetworks_vnet1
        operationId: VirtualNetworks_CreateOrUpdate
        resourceUpdate:
          - replace: /properties/subnets/0/properties/privateLinkServiceNetworkPolicies
            value: Disabled
          - add: /properties/subnets/1
            value:
              name: subnet2
              properties:
                addressPrefix: 10.0.2.0/24
                provisioningState: Succeeded
                delegations: []
                privateEndpointNetworkPolicies: Enabled
                privateLinkServiceNetworkPolicies: Enabled
              id: >-
                /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_network_private_endpoints000001/providers/Microsoft.Network/virtualNetworks/vnet1/subnets/subnet2
              type: Microsoft.Network/virtualNetworks/subnets
      - step: Subnets_Get_905
        exampleFile: ../examples/Subnets_Get_905_Generated.json
        operationId: Subnets_Get
        variables:
          subnetName: subnet2
      - step: Create_subnets_subnet2
        resourceName: subnets_subnet2
        exampleFile: ../examples/Create_subnets_subnet2_Generated.json
        operationId: Subnets_CreateOrUpdate
        variables:
          subnetName: subnet2
      - step: Create_privateLinkServices_lks1
        resourceName: privateLinkServices_lks1
        exampleFile: ../examples/Create_privateLinkServices_lks1_Generated.json
        operationId: PrivateLinkServices_CreateOrUpdate
      - step: AvailablePrivateEndpointTypes_List_908
        exampleFile: ../examples/AvailablePrivateEndpointTypes_List_908_Generated.json
        operationId: AvailablePrivateEndpointTypes_List
      - step: Create_privateEndpoints_pe1
        resourceName: privateEndpoints_pe1
        exampleFile: ../examples/Create_privateEndpoints_pe1_Generated.json
        operationId: PrivateEndpoints_CreateOrUpdate
      - step: PrivateEndpoints_ListBySubscription_910
        exampleFile: ../examples/PrivateEndpoints_ListBySubscription_910_Generated.json
        operationId: PrivateEndpoints_ListBySubscription
      - step: PrivateEndpoints_List_911
        exampleFile: ../examples/PrivateEndpoints_List_911_Generated.json
        operationId: PrivateEndpoints_List
      - step: PrivateLinkServices_Get_912
        exampleFile: ../examples/PrivateLinkServices_Get_912_Generated.json
        operationId: PrivateLinkServices_Get
      - step: >-
          Create_privateEndpointConnections_pe1.c39a6349-ed87-46f8-bc25-16e3010d75ea
        resourceName: privateEndpointConnections_pe1.c39a6349-ed87-46f8-bc25-16e3010d75ea
        exampleFile: >-
          ../examples/Create_privateEndpointConnections_pe1.c39a6349-ed87-46f8-bc25-16e3010d75ea_Generated.json
        operationId: PrivateLinkServices_UpdatePrivateEndpointConnection
      - step: PrivateEndpoints_Get_914
        exampleFile: ../examples/PrivateEndpoints_Get_914_Generated.json
        operationId: PrivateEndpoints_Get
      - step: PrivateLinkServices_DeletePrivateEndpointConnection_915
        exampleFile: >-
          ../examples/PrivateLinkServices_DeletePrivateEndpointConnection_915_Generated.json
        operationId: PrivateLinkServices_DeletePrivateEndpointConnection
      - step: PrivateLinkServices_Get_916
        exampleFile: ../examples/PrivateLinkServices_Get_916_Generated.json
        operationId: PrivateLinkServices_Get
      - step: PrivateEndpoints_Delete_917
        exampleFile: ../examples/PrivateEndpoints_Delete_7_Generated.json
        operationId: PrivateEndpoints_Delete
    variables:
      virtualNetworkName: vnet1
      subnetName: subnet1
      serviceName: lks1
      location: centralus
      privateEndpointName: pe1
      peConnectionName: pe1.c39a6349-ed87-46f8-bc25-16e3010d75ea
