scope: ResourceGroup
testScenarios:
  - description: test_network_virtual_hub_router_scenario
    steps:
      - step: Create_virtualNetworks_vnet2
        resourceName: virtualNetworks_vnet2
        exampleFile: ../examples/Create_virtualNetworks_vnet2_Generated_1067.json
        operationId: VirtualNetworks_CreateOrUpdate
      - step: Subnets_Get_1068
        exampleFile: ../examples/Subnets_Get_2_Generated.json
        operationId: Subnets_Get
      - step: Create_subnets_RouteServerSubnet
        resourceName: subnets_RouteServerSubnet
        exampleFile: ../examples/Create_subnets_RouteServerSubnet_Generated.json
        operationId: Subnets_CreateOrUpdate
      - step: VirtualNetworks_Get_1070
        exampleFile: ../examples/VirtualNetworks_Get_1070_Generated.json
        operationId: VirtualNetworks_Get
      - step: Create_virtualHubs_vrouter2
        resourceName: virtualHubs_vrouter2
        exampleFile: ../examples/Create_virtualHubs_vrouter2_Generated.json
        operationId: VirtualHubs_CreateOrUpdate
      - step: Create_ipConfigurations_Default
        resourceName: ipConfigurations_Default
        exampleFile: ../examples/Create_ipConfigurations_Default_Generated.json
        operationId: VirtualHubIpConfiguration_CreateOrUpdate
      - step: VirtualHubs_Get_1073
        exampleFile: ../examples/VirtualHubs_Get_1073_Generated.json
        operationId: VirtualHubs_Get
      - step: Update_virtualHubs_vrouter2_1075
        resourceName: virtualHubs_vrouter2
        operationId: VirtualHubs_CreateOrUpdate
        resourceUpdate:
          - replace: /properties/virtualRouterAsn
            value: 65515
          - replace: /properties/virtualRouterIps
            value:
              - 10.0.0.4
              - 10.0.0.5
          - replace: /properties/routingState
            value: Provisioned
          - replace: /properties/allowBranchToBranchTraffic
            value: true
      - step: VirtualHubs_ListByResourceGroup_1076
        exampleFile: ../examples/VirtualHubs_ListByResourceGroup_1076_Generated.json
        operationId: VirtualHubs_ListByResourceGroup
      - step: VirtualHubs_Get_1077
        exampleFile: ../examples/VirtualHubs_Get_1077_Generated.json
        operationId: VirtualHubs_Get
      - step: Create_bgpConnections_peer1
        resourceName: bgpConnections_peer1
        exampleFile: ../examples/Create_bgpConnections_peer1_Generated.json
        operationId: VirtualHubBgpConnection_CreateOrUpdate
      - step: VirtualHubBgpConnections_List_1079
        exampleFile: ../examples/VirtualHubBgpConnections_List_1079_Generated.json
        operationId: VirtualHubBgpConnections_List
      - step: VirtualHubBgpConnection_Get_1080
        exampleFile: ../examples/VirtualHubBgpConnection_Get_1080_Generated.json
        operationId: VirtualHubBgpConnection_Get
      - step: VirtualHubBgpConnections_ListAdvertisedRoutes_1081
        exampleFile: >-
          ../examples/VirtualHubBgpConnections_ListAdvertisedRoutes_1081_Generated.json
        operationId: VirtualHubBgpConnections_ListAdvertisedRoutes
      - step: VirtualHubBgpConnections_ListLearnedRoutes_1082
        exampleFile: >-
          ../examples/VirtualHubBgpConnections_ListLearnedRoutes_1082_Generated.json
        operationId: VirtualHubBgpConnections_ListLearnedRoutes
      - step: VirtualHubBgpConnection_Delete_1083
        exampleFile: ../examples/VirtualHubBgpConnection_Delete_1083_Generated.json
        operationId: VirtualHubBgpConnection_Delete
      - step: VirtualHubIpConfiguration_Delete_1084
        exampleFile: ../examples/VirtualHubIpConfiguration_Delete_1084_Generated.json
        operationId: VirtualHubIpConfiguration_Delete
      - step: VirtualHubs_Delete_1085
        exampleFile: ../examples/VirtualHubs_Delete_1085_Generated.json
        operationId: VirtualHubs_Delete
    variables:
      virtualNetworkName: vnet2
      subnetName: RouteServerSubnet
      virtualHubName: vrouter2
      ipConfigName: Default
      connectionName: peer1
      hubName: vrouter2
